import {GoogleGenerativeAI} from "@google/generative-ai"
// import fs from "node:fs";
// import mime from "mime-types";

// const {
//     GoogleGenerativeAI,
//     HarmCategory,
//     HarmBlockThreshold,
//   } = require("@google/generative-ai");
//   const fs = require("node:fs");
//   const mime = require("mime-types");
  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseModalities: [
    ],
    responseMimeType: "application/json",
  };
  
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate travel plan for location:Las Vegas for 3 days for couple with a cheap budget,Give me a hotel options list with HotelName ,Hotel address,Price,Hotel Image url,geo coordinates,ratings,descriptions and suggest iterinary with place Name, Place Details,place image url,geo coordinates,ticket pricing rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a budget-friendly Las Vegas itinerary for a couple, along with hotel options and a detailed daily plan in JSON format.  I'll aim for the best experiences while keeping costs down.\n\n**Important Considerations:**\n\n*   **Prices Fluctuate:** Hotel and show ticket prices in Vegas can vary wildly based on the season, day of the week, and demand.  The prices provided are estimates.  Always check current prices before booking.\n*   **Walking:** Vegas is bigger than it looks. Be prepared to walk a lot, or utilize the free trams and buses when possible.\n*   **Deals and Discounts:** Look for deals on Groupon, LivingSocial, and travel websites. Casino loyalty programs (like M Life or Caesars Rewards) can offer discounts.\n*   **Free Activities:** Vegas has tons of free things to do â€“ people-watching, fountains, gardens, and free shows.\n\n```json\n{\n  \"tripName\": \"Budget Las Vegas Getaway for Couple (3 Days)\",\n  \"budget\": \"Cheap\",\n  \"travelers\": \"Couple\",\n  \"location\": \"Las Vegas, NV\",\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": 40,\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/e6/02/ae/exterior.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1261,\n        \"longitude\": -115.1655\n      },\n      \"ratings\": 3.5,\n      \"description\": \"Affordable option on the Strip with a circus theme, Adventuredome indoor theme park, and free circus acts.\"\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": 50,\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/14/9c/2f/95/excalibur-hotel-casino.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0983,\n        \"longitude\": -115.1744\n      },\n      \"ratings\": 3.8,\n      \"description\": \"Medieval-themed hotel at the south end of the Strip, offering affordable rooms and family-friendly entertainment.\"\n    },\n     {\n      \"hotelName\": \"Luxor Hotel & Casino\",\n      \"hotelAddress\": \"3900 S Las Vegas Blvd, Las Vegas, NV 89119\",\n      \"price\": 60,\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/5c/4c/95/luxor-hotel-casino.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0956,\n        \"longitude\": -115.1759\n      },\n      \"ratings\": 4.0,\n      \"description\": \"Pyramid-shaped hotel, reasonably priced. Offers a unique experience. Close to other south-strip attractions.\"\n    },\n    {\n      \"hotelName\": \"The LINQ Hotel + Experience\",\n      \"hotelAddress\": \"3535 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": 70,\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/27/71/01/d5/the-linq-hotel-experience.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1163,\n        \"longitude\": -115.1692\n      },\n      \"ratings\": 4.2,\n      \"description\": \"Centrally located on the Strip, access to High Roller observation wheel and the LINQ Promenade with dining and entertainment options.  Slightly more expensive but good location.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"South Strip Exploration & Free Entertainment\",\n      \"bestTimeToVisit\": \"Morning and Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n          \"placeDetails\": \"Iconic Las Vegas sign. Great for photos.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Welcome_to_Las_Vegas_sign.JPG/1280px-Welcome_to_Las_Vegas_sign.JPG\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0826,\n            \"longitude\": -115.1726\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.7,\n          \"travelTimeFromHotel\": \"15-20 minutes (depending on hotel, use rideshare/bus)\"\n        },\n        {\n          \"placeName\": \"Luxor Hotel & Casino\",\n          \"placeDetails\": \"Visit the Luxor, marvel at the pyramid and the Sphinx.\",\n          \"placeImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/5c/4c/95/luxor-hotel-casino.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0956,\n            \"longitude\": -115.1759\n          },\n          \"ticketPricing\": \"Free to enter, attractions inside may have fees.\",\n          \"rating\": 4.0,\n          \"travelTimeFromPrevious\": \"5-10 minutes (walking)\"\n        },\n        {\n          \"placeName\": \"Excalibur Hotel & Casino\",\n          \"placeDetails\": \"Medieval-themed hotel, family friendly.\",\n          \"placeImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/14/9c/2f/95/excalibur-hotel-casino.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0983,\n            \"longitude\": -115.1744\n          },\n          \"ticketPricing\": \"Free to enter, shows and attractions inside have fees.\",\n          \"rating\": 3.8,\n          \"travelTimeFromPrevious\": \"5 minutes (walking)\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Stunning floral displays that change seasonally.  Completely free.\",\n          \"placeImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-s/1b/65/88/88/bellagio-conservatory.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1125,\n            \"longitude\": -115.1763\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.8,\n          \"travelTimeFromPrevious\": \"20-30 minutes (bus/tram from Excalibur to Bellagio area)\"\n        },\n        {\n          \"placeName\": \"Fountains of Bellagio\",\n          \"placeDetails\": \"Iconic water show set to music. Free and runs frequently in the afternoon and evening.\",\n          \"placeImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-s/1c/f6/3f/b9/fountains-of-bellagio.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1758\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.9,\n          \"travelTimeFromPrevious\": \"2 minutes (walking, outside Bellagio)\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Downtown Vegas & Fremont Street Experience\",\n      \"bestTimeToVisit\": \"Afternoon/Evening for Fremont Street\",\n      \"places\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Light and sound show on a pedestrian mall in old Downtown Las Vegas. Free to enter.\",\n          \"placeImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/ad/4b/b1/viva-vision-at-fremont.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1703,\n            \"longitude\": -115.1422\n          },\n          \"ticketPricing\": \"Free (some attractions inside cost extra)\",\n          \"rating\": 4.5,\n          \"travelTimeFromHotel\": \"30-45 minutes (depending on hotel, use bus/rideshare)\"\n        },\n        {\n          \"placeName\": \"SlotZilla Zip Line\",\n          \"placeDetails\": \"Zip line experience over Fremont Street.  Consider if budget allows.\",\n          \"placeImageUrl\": \"https://fremontstreetexperience.com/wp-content/uploads/2024/03/Slotzilla-Lower_1920x1080.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1707,\n            \"longitude\": -115.1424\n          },\n          \"ticketPricing\": \"$39-$59 (depending on the line)\",\n          \"rating\": 4.3,\n          \"travelTimeFromPrevious\": \"Located on Fremont Street\",\n          \"optional\": true\n        },\n        {\n          \"placeName\": \"The Mob Museum\",\n          \"placeDetails\": \"Interactive exhibits about organized crime history. Good for history buffs.\",\n          \"placeImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/19/f7/b8/0d/the-mob-museum.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1681,\n            \"longitude\": -115.1426\n          },\n          \"ticketPricing\": \"$30-35\",\n          \"rating\": 4.6,\n          \"travelTimeFromPrevious\": \"5 minutes (walking from Fremont Street)\",\n          \"optional\": true\n        },\n        {\n            \"placeName\": \"Heart Attack Grill\",\n            \"placeDetails\": \"The Heart Attack Grill is an American hamburger restaurant in downtown Las Vegas, Nevada. It makes light of and glorifies obesity, and serves high-calorie menu items with comically offensive names, such as \\\"Single\\\", \\\"Double\\\", \\\"Triple\\\", and \\\"Quadruple Bypass\\\" burgers, \\\"Flatliner Fries\\\", and \\\"Jolt Cola\\\".\",\n            \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/45/Heart_Attack_Grill_Las_Vegas_%283852596572%29.jpg/640px-Heart_Attack_Grill_Las_Vegas_%283852596572%29.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 36.1708,\n              \"longitude\": -115.1423\n            },\n            \"ticketPricing\": \"$15-30\",\n            \"rating\": 3.8,\n            \"travelTimeFromPrevious\": \"Located on Fremont Street\",\n            \"optional\": true\n          }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"High Roller & Departure\",\n      \"bestTimeToVisit\": \"Afternoon for the High Roller\",\n      \"places\": [\n        {\n          \"placeName\": \"High Roller Observation Wheel\",\n          \"placeDetails\": \"Giant Ferris wheel offering panoramic views of Las Vegas.\",\n          \"placeImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-s/1b/f9/0a/3b/high-roller-observation.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1159,\n            \"longitude\": -115.1695\n          },\n          \"ticketPricing\": \"$25-37 (check for discounts online)\",\n          \"rating\": 4.5,\n          \"travelTimeFromHotel\": \"10-20 minutes (depending on hotel, walk/rideshare)\",\n          \"notes\": \"Best to do this in the afternoon for the best views.\"\n        },\n        {\n          \"placeName\": \"LINQ Promenade\",\n          \"placeDetails\": \"Outdoor shopping, dining, and entertainment district.\",\n          \"placeImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-s/14/98/2a/54/the-linq-promenade.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1163,\n            \"longitude\": -115.1692\n          },\n          \"ticketPricing\": \"Free to enter, prices vary for shops and restaurants.\",\n          \"rating\": 4.3,\n          \"travelTimeFromPrevious\": \"Located at the base of the High Roller\"\n        },\n         {\n          \"placeName\": \"Ethel M Chocolate Factory and Cactus Garden\",\n          \"placeDetails\": \"A chocolate factory with free self-guided tours and a beautiful cactus garden.\",\n          \"placeImageUrl\": \"https://www.8newsnow.com/wp-content/uploads/sites/59/2024/05/Ethel-M-Chocolate-Factory-Cactus-Garden.jpg?strip=all&quality=86&w=640\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0585,\n            \"longitude\": -115.0648\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.6,\n          \"travelTimeFromPrevious\": \"20-30 minutes (rideshare from the Strip)\",\n          \"notes\": \"Good for a final, relaxing activity before heading to the airport.\"\n        }\n      ]\n    }\n  }\n}\n```\n\n**Explanation and Budget Tips:**\n\n*   **Hotel Choice:** I've included a range of budget-friendly hotels. Circus Circus is often the cheapest, but consider the location and amenities you prefer. Book in advance for the best deals. Weekdays are generally cheaper than weekends.\n*   **Transportation:** Walking is your friend! Use the free trams on the Strip (e.g., between Excalibur, Luxor, and Mandalay Bay). Public buses are also a good option. Rideshares can add up quickly.\n*   **Food:** Avoid eating at the fancy restaurants on the Strip. Look for cheaper options off the Strip or take advantage of happy hour deals. Fast food and food courts are your best friends for saving money. Consider bringing snacks and drinks to avoid buying them on the Strip.\n*   **Entertainment:** Focus on free attractions. The Fountains of Bellagio, the Conservatory, and the Fremont Street Experience are all excellent and free. Look for free shows at some of the hotels.\n*   **Gambling:** If you gamble, set a strict budget and stick to it. Remember, the house always wins in the long run.\n*   **Hydration:** Las Vegas is a desert. Stay hydrated by drinking plenty of water. Buy water in bulk off the Strip to save money.\n*   **Souvenirs:** Buy souvenirs off the Strip for cheaper prices.\n\n**Important Notes:**\n\n*   Double-check all pricing and opening times before your trip.\n*   This itinerary is a suggestion; customize it to your interests.\n*   Be prepared for crowds, especially on weekends and holidays.\n*   Have fun!\n\nThis detailed JSON output provides a good starting point for your budget-friendly Las Vegas adventure. Remember to research and book in advance to secure the best deals. Enjoy!\n"},
          ],
        },
      ],
    });
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // TODO: Following code needs to be updated for client-side apps.
    // const candidates = result.response.candidates;
    // for(let candidate_index = 0; candidate_index < candidates.length; candidate_index++) {
    //   for(let part_index = 0; part_index < candidates[candidate_index].content.parts.length; part_index++) {
    //     const part = candidates[candidate_index].content.parts[part_index];
    //     if(part.inlineData) {
    //       try {
    //         const filename = `output_${candidate_index}_${part_index}.${mime.extension(part.inlineData.mimeType)}`;
    //         fs.writeFileSync(filename, Buffer.from(part.inlineData.data, 'base64'));
    //         console.log(`Output written to: ${filename}`);
    //       } catch (err) {
    //         console.error(err);
    //       }
    //     }
    //   }
    // }
    // console.log(result.response.text());
